@import "constants";

@mixin building_animation_0($background_color) {
  opacity: 1;
  background: $background_color + #252525;
}

@mixin building_animation_100 {
  opacity: 0;
  background: white;
}

@-webkit-keyframes building-green {
  0% { @include building_animation_0($very-very-light-green); }
  100% { @include building_animation_100; }
}

@-webkit-keyframes building-red {
  0% { @include building_animation_0($very-very-light-red); }
  100% { @include building_animation_100; }
}

@-moz-keyframes building-green {
  0% { @include building_animation_0($very-very-light-green); }
  100% { @include building_animation_100; }
}

@-moz-keyframes building-red {
  0% { @include building_animation_0($very-very-light-red); }
  100% { @include building_animation_100; }
}

@-ms-keyframes building-green {
  0% { @include building_animation_0($very-very-light-green); }
  100% { @include building_animation_100; }
}

@-ms-keyframes building-red {
  0% { @include building_animation_0($very-very-light-red); }
  100% { @include building_animation_100; }
}


$success-unicode-glyph: "\2022"; // unicode bullet
$failure-unicode-glyph: "\00D7"; // unicode 'x'

// Default values for tiles_15; vars need to be declared before being invokes.

$information-width: 420px !default;

$success-font-size: 1.4em !default;
$success-line-height: 36px !default;
$success-padding-left: 6px !default;
$success-top: -38px !default;

$failure-font-size: 1.3em !default;
$failure-line-height: -1px !default;
$failure-padding-left: 3px !default;
$failure-top: -36px !default;

//Variables for history elements
$history-margin-vertical: 8px !default;
$history-margin-history: 5px !default;

$history-width: 32px !default;
$history-height: 32px !default;

$statusbar-font-size: 30px !default;

ol.projects {
  list-style: none;

  li.empty-project {
    background: image_url("icons/empty_tile_x.png") center no-repeat;
  }

  li.project {
    float:left;

    > div {
      height: 100%;
    }

    .history {
      ol {
        li {
          display:block;
          float:left;
          width: $history-width;
          height:$history-height;
          margin: $history-margin-vertical $history-margin-history;
          position: relative;
        }

        a {
          overflow: hidden;
          font-size: 0;
          display: block;
          width: $history-width;
          height: $history-height;
        }
      }
    }

    &.success {
      background: $green;
      .information .status-bar {
          background: $light-green;
          border-top: solid $very-dark-green 2px;

      }
      .velocity {
        background: $very-light-green;
        border-color: $very-dark-green;

        .sparklines .sparkline {
          background: $very-very-light-green;
        }

        .sparklines.building .sparkline {
          @include animation-name(building-green);
        }
      }

      &.aggregate .information {
        @include linear-gradient(0deg, $green 50%, $dark-green 51%);
      }

      .history {
        ol {
          li {
            background: $very-very-light-green center no-repeat;
          }
        }
      }
    }

    &.failure {
      background: $red;
      .information {
        .status-bar {
          background: $light-red;
          border-top: solid $very-dark-red 2px;
        }

      }
      .velocity {
        background: $very-light-red;
        border-color: $very-dark-red;

        .sparklines .sparkline {
          background: $very-very-light-red;
        }

        .sparklines.building .sparkline {
          @include animation-name(building-red);
        }
      }

      &.aggregate .information {
        @include linear-gradient(0deg, $red 50%, $dark-red 51%);
      }

      .history {
        ol {
          li {
            background: $very-very-light-red no-repeat center;
          }
        }
      }
    }


    &.offline {
      background: $grey;

      .information {
        .status-bar {
          background: $light-grey;
          border-top: solid $very-dark-grey 2px;
        }
      }

      .velocity {
        background: $very-light-grey;
        border-color: $very-dark-grey;

        .sparklines .sparkline {
          background: $very-very-light-grey;
        }
      }
      &.aggregate .information{
        @include linear-gradient(0deg, $grey 50%, $dark-grey 51%);
      }
    }


    &.server-unreachable {
      background: $very-very-light-grey;

      .information {
        .status-bar {
          background: $very-light-grey;
          border-top: solid $dark-grey 2px;
        }
      }

      .velocity {
        background: $very-very-light-grey;
        border-color: $dark-grey;

        .sparklines .sparkline {
          background: $white;
        }
      }
      &.aggregate .information{
        @include linear-gradient(0deg, $light-grey 50%, $grey 51%);
      }
    }

    .information {
      > div {
        text-align: left;
      }
      float: left;

      h1 {
        font-family: 'Avenir LT W01 85 Heavy', Helvetica, sans-serif;
        font-weight: normal;
        text-transform: capitalize;
        color: #2B2820;

        a, a:hover, a:visited {
          color: #2B2820;
          text-decoration: none;
        }
      }

      .status-bar {
        .building-indicator {
          float:left;
          margin:3px 0;
          width:80px;
          text-align:center;

          img {
            width:30px;
            height:30px;
          }
        }

        .publish-date {
          font-family: 'Avenir LT W01 35 Light', Helvetica, sans-serif;
          font-weight: normal;
          float: left;
          text-align: center;
        }

        .inventory {
          .healthy {
            color: green;
          }

          .unhealthy {
            color: red;
          }

          float: right;
          margin-right: 20px;
          font-size: 10px;
        }

        .name {
          font-family:'Avenir LT W01 55 Roman', Helvetica, sans-serif;
          font-weight: normal;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          text-transform: capitalize;

          a {
            text-decoration: none;
            color: black;
          }
        }
      }
    }

    .history {
      ol {
        li {
          line-height: 32px;
          font-family:'Avenir LT W01 55 Roman', Helvetica, sans-serif;
          text-decoration: none;
          a {
            position: relative;
          }
        }

        li.success a {
          top: $success-top;
        }

        li.failure a {
          top: $failure-top;
        }

        li.success:before {
          content: $success-unicode-glyph;
          font-size: $success-font-size;
          line-height: $success-line-height;
          padding-left: $success-padding-left;
        }

        li.failure:before {
          content: $failure-unicode-glyph;
          font-size: $failure-font-size;
          line-height: $failure-line-height;
          padding-left: $failure-padding-left;
        }
      }
    }

    .velocity {
      float: right;
      border-left: solid 2px;
      border-right: solid 2px;
      float: left;
      text-align: center;

      .sparklines {
        display: inline-block;
        position: relative;
        list-style: none;

        .sparkline {
          display: block;
          float: left;
          position: relative;
          margin: 2px;
          overflow: hidden;
          text-indent: -1000px;

          a {
            display: block;
          }

          &.offline {
            background-color: #5CC8F9;
          }

          &.success {
            a {
              background: url(/assets/icons/success.png) center no-repeat;
            }
          }

          &.failure {
            a {
              background: url(/assets/icons/failure.png) center no-repeat;
            }
          }
        }

        &.building {
          .sparkline {
            @include animation-duration(1s);
            @include animation-direction(alternate);
            @include animation-timing-function(ease);
            @include animation-iteration-count(infinite);

            &:nth-child(1) { @include animation-delay(.135s); }
            &:nth-child(2) { @include animation-delay(.94s); }
            &:nth-child(3) { @include animation-delay(.26s); }
            &:nth-child(4) { @include animation-delay(2s); }
            &:nth-child(5) { @include animation-delay(1s); }
            &:nth-child(6) { @include animation-delay(.5s); }
            &:nth-child(7) { @include animation-delay(.3s); }
            &:nth-child(8) { @include animation-delay(1.18s); }
            &:nth-child(9) { @include animation-delay(1.8s); }
            &:nth-child(10) { @include animation-delay(.4s); }

            &.success, &.failure {
              a {
                background-color: transparent;
              }
            }
          }
        }
      }
    }

    &.success .velocity .project_history .sparklines.building .sparkline {
      @include animation-name(building-green);
      }
    }

    &.failure .velocity .project_history .sparklines.building .sparkline {
      @include animation-name(building-red);
    }
  }
}

.tiles_15 ol.projects {
  $information-width: 420px;

  > li {
    @include grid(4);
  }

  li.project {
    height: 192px;
    margin-top: 6px;
    margin-bottom: 6px;
    .information {
      width: $information-width;

      h1 {
        $height: 142px - 1;
        height: $height;
        padding: 0 15px;
        line-height: $height;
        font-size: 100px;
      }

      .status-bar {
        height: 50px - 1;
        line-height: 53px - 1;
        font-size: 30px;

        .publish-date {
          width: 80px;
          font-size: 24px;
        }
      }
    }

    .velocity {
      width: 180px;
      .publish_date {
        height: 150px;
        font-size: 34pt;
        line-height: 150px;
      }

      .sparklines {
        margin: 100px 15px 5px;
        width: 150px;

        .sparkline {
          a {
            width: 26px;
            height: 26px;
          }

          &.success {
            a {
              background: url(/assets/icons/success_15.png) center no-repeat;
            }
          }

          &.failure {
            a {
              background: url(/assets/icons/failure_15.png) center no-repeat;
            }
          }
        }
      }
    }

    &.aggregate {
      .information {
        background-size: ($information-width/5.5);
      }
    }
  }
}

.tiles_24 ol.projects {
  $information-width: 263px;

  > li {
    @include grid(3);
  }

  li.project {
    margin-top: 6px;
    margin-bottom: 6px;
    height: 161px;
    .information {
      width: $information-width;

      h1 {
        $height: 110px - 1;
        height: $height;
        padding: 0 15px;
        line-height: $height;
        font-size: 92px;
      }

      .status-bar {
        padding: 0 15px;
        height: 50px - 1;
        line-height: 50px - 1;
        font-size: 30px;
      }
    }

    .velocity {
      width: 180px;
      .publish_date {
        height: 150px;
        font-size: 34pt;
        line-height: 150px;
      }

      .sparklines {
        margin: 95px 30px 5px;
        width: (20px + 2 + 2) * 5;

        .sparkline {
          a {
            width: 20px;
            height: 20px;
          }

        }
      }
    }

    &.aggregate {
      .information {
        background-size: ($information-width/5.5);
      }
    }
  }
}

.tiles_48 ol.projects {
  $information-width: 190px;

  > li {
    @include grid(2);
  }

  li.empty-project {
    background: image_url("icons/empty_tile_x_48.png") center no-repeat;
  }

  li.project {
    height: 118px;
    margin-top: 6px;
    margin-bottom: 6px;
    .information {
      width: $information-width;

      h1 {
        $height: 82px - 1;
        height: $height;
        padding: 0 15px;
        line-height: $height;
        font-size: 60px;
      }

      .status-bar {
        padding: 0 15px;
        height: 35px - 1;
        line-height: 35px - 1;
        font-size: 28px;
      }
    }

    .velocity {
      width: 96px;
      .publish_date {
        height: 90px;
        font-size: 24pt;
        line-height: 70px;
      }

      .sparklines {
        margin: 70px 10px 20px;
        width: 80px;

        .sparkline {
          margin: 2px 2px 0 0;
          a {
            background-size: 63%;
            width: 14px;
            height: 14px;
          }
        }
      }
    }

    &.aggregate {
      .information {
        background-size: ($information-width/5.5);
      }
    }
  }
}

.tiles_63 ol.projects {
  $information-width: 157px;

  > li {
    @include grid(1, 7);
  }

  li.empty-project {
    background: image_url("icons/empty_tile_x_48.png") center no-repeat;
  }

  li.location-header {
    text-align: center;

    background: image_url("icons/location_arrow.png") 50% 74% no-repeat;

    span {
      border-bottom: 2px solid #666;
      color: #666;
      display: inline-block;
      font-family: 'AvenirNextLTW01-Condens 721299', Helvetica, sans-serif;
      font-size: 40px;
      margin-top: 23px;
      text-transform: uppercase;
    }
  }

  li.project {
    height: 104px;
    margin-top: 6px;
    margin-bottom: 6px;
    .information {
      width: $information-width;

      h1 {
        $height: 80px - 1;
        height: $height;
        padding: 0 15px;
        line-height: $height;
        font-size: 48px;
      }

      .status-bar {
        border: none;
        padding: 0 15px;
        height: 25px;
        line-height: 27px;
        font-size: 14px;
      }
    }

    .velocity {
      border: none;
      width: 96px;
      .publish_date {
        height: 90px;
        font-size: 24pt;
        line-height: 70px;
      }

      .sparklines {
        margin: 60px 10px 20px;
        width: 80px;

        .sparkline {
          margin: 2px 2px 0 0;
          a {
            background-size: 63%;
            width: 14px;
            height: 14px;
          }

        }
      }
    }

    &.aggregate {
      .information {
        background-size: ($information-width/5.5);
      }
    }
  }
}

